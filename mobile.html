<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>小脑浏览器 - 移动端</title>
    <link rel="stylesheet" href="mobile-styles.css">
    <link rel="stylesheet" href="multi-platform-search.css">
    <link rel="stylesheet" href="mobile-browser-enhancements.css">
    <link rel="stylesheet" href="enhanced-browser-v3.css">
    <link rel="stylesheet" href="browser-page-styles.css">
    <link rel="stylesheet" href="mobile-dark-mode.css">
    <link rel="stylesheet" href="mobile-center-fix.css">
    <link rel="stylesheet" href="mobile-app-search.css">
</head>
<body>
    <!-- 移动端主容器 -->
    <div class="mobile-app">
        <!-- 状态栏 -->
        <div class="status-bar">
            <div class="status-left">
                <span class="time">15:42</span>
                <button class="device-toggle" id="deviceToggle" title="切换到PC端">
                    <span class="device-icon">💻</span>
                </button>
            </div>
            <div class="status-right">
                <span class="signal-dots">••••</span>
                <span class="wifi-icon">📶</span>
                <span class="battery">100</span>
            </div>
        </div>

        <!-- 主要内容区域 -->
        <div class="app-content">
            <!-- AI聊天页面 -->
            <div class="page active" id="ai-page">
                <!-- AI模型选择器 -->
                <div class="ai-selector">
                    <div class="ai-model-tabs">
                        <div class="ai-tab active" data-model="deepseek">
                            <div class="ai-tab-avatar">🧠</div>
                            <span>DeepSeek</span>
                        </div>
                        <div class="ai-tab" data-model="kimi">
                            <div class="ai-tab-avatar">🤖</div>
                            <span>Kimi</span>
                        </div>
                        <div class="ai-tab" data-model="zhipu">
                            <div class="ai-tab-avatar">💭</div>
                            <span>智谱清言</span>
                        </div>
                    </div>
                    <button class="api-config-btn" id="apiConfigBtn">⚙️</button>
                </div>

                <!-- 聊天区域 -->
                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <!-- 欢迎消息 -->
                        <div class="message ai-message">
                            <div class="message-avatar">🧠</div>
                            <div class="message-content">
                                <div class="message-text">你好！我是DeepSeek，有什么可以帮助你的吗？</div>
                                <div class="message-time">刚刚</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 输入区域 -->
                <div class="chat-input-container">
                    <div class="input-wrapper">
                        <input type="text" id="messageInput" placeholder="输入消息..." class="message-input">
                        <button id="sendButton" class="send-button">
                            <span class="send-icon">📤</span>
                        </button>
                    </div>
                </div>

                <!-- API配置弹窗 -->
                <div class="api-config-modal" id="apiConfigModal" style="display: none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>API配置</h3>
                            <button class="close-btn" id="closeConfigBtn">×</button>
                        </div>
                        <div class="modal-body">
                            <div class="config-section">
                                <label>DeepSeek API Key:</label>
                                <input type="password" id="deepseekApiKey" placeholder="输入DeepSeek API Key">
                            </div>
                            <div class="config-section">
                                <label>Kimi API Key:</label>
                                <input type="password" id="kimiApiKey" placeholder="输入Kimi API Key">
                            </div>
                            <div class="config-section">
                                <label>智谱清言 API Key:</label>
                                <input type="password" id="zhipuApiKey" placeholder="输入智谱清言 API Key">
                            </div>
                            <div class="config-actions">
                                <button id="saveConfigBtn" class="save-btn">保存配置</button>
                                <button id="testConnectionBtn" class="test-btn">测试连接</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 浏览器页面 -->
            <div class="page" id="browser-page">
                <!-- 浏览器头部 -->
                <div class="browser-header">
                    <div class="url-bar">
                        <button class="nav-btn" id="searchEngineBtn" title="搜索引擎">🔍</button>
                        <div class="url-input-container">
                            <input type="text" placeholder="请输入网址或搜索内容..." class="url-input">
                            <div class="url-actions">
                                <button class="url-action-btn" id="pasteBtn" title="粘贴">📋</button>
                                <button class="url-action-btn" id="clearBtn" title="清空">✕</button>
                            </div>
                        </div>
                        <button class="action-btn" id="aiModelBtn" title="AI模型">🤖</button>
                    </div>
                    
                    <!-- 浏览器工具栏 -->
                    <div class="browser-toolbar">
                        <button class="tool-btn" id="backBtn" title="后退">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                            </svg>
                        </button>
                        <button class="tool-btn" id="forwardBtn" title="前进">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>
                            </svg>
                        </button>
                        <button class="tool-btn" id="refreshBtn" title="刷新">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                            </svg>
                        </button>
                        <button class="tool-btn" id="homeBtn" title="主页">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                            </svg>
                        </button>
                        <button class="tool-btn" id="bookmarkBtn" title="收藏">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
                            </svg>
                        </button>
                        <button class="tool-btn" id="bookmarkListBtn" title="收藏夹">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"/>
                            </svg>
                        </button>
                        <button class="tool-btn" id="tabsBtn" title="标签页">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                            </svg>
                        </button>
                        <button class="tool-btn" id="historyBtn" title="历史">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M13,3A9,9 0 0,0 4,12H1L4.89,15.89L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3M12,8V13L16.28,15.54L17,14.33L13.5,12.25V8H12Z"/>
                            </svg>
                        </button>
                        <button class="tool-btn" id="shareBtn" title="分享">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18,16.08C17.24,16.08 16.56,16.38 16.04,16.85L8.91,12.7C8.96,12.47 9,12.24 9,12C9,11.76 8.96,11.53 8.91,11.3L15.96,7.19C16.5,7.69 17.21,8 18,8A3,3 0 0,0 21,5A3,3 0 0,0 18,2A3,3 0 0,0 15,5C15,5.24 15.04,5.47 15.09,5.7L8.04,9.81C7.5,9.31 6.79,9 6,9A3,3 0 0,0 3,12A3,3 0 0,0 6,15C6.79,15 7.5,14.69 8.04,14.19L15.16,18.34C15.11,18.55 15.08,18.77 15.08,19C15.08,20.61 16.39,21.91 18,21.91C19.61,21.91 20.92,20.61 20.92,19C20.92,17.39 19.61,16.08 18,16.08M18,4A1,1 0 0,1 19,5A1,1 0 0,1 18,6A1,1 0 0,1 17,5A1,1 0 0,1 18,4M6,13A1,1 0 0,1 7,12A1,1 0 0,1 6,11A1,1 0 0,1 5,12A1,1 0 0,1 6,13M18,20C17.45,20 17,19.55 17,19C17,18.45 17.45,18 18,18C18.55,18 19,18.45 19,19C19,19.55 18.55,20 18,20Z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- 浏览器内容区域 -->
                <div class="browser-content" id="browserContent">
                    <iframe id="browserFrame" src="https://www.baidu.com"></iframe>
                    <!-- 加载状态 -->
                    <div class="browser-loading" id="browserLoading">
                        <div class="loading-spinner"></div>
                    </div>
                </div>

                <!-- 功能卡片 -->
                <div class="feature-cards" style="display: none;">
                    <div class="feature-card">
                        <div class="card-icon">👤</div>
                        <div class="card-title">助手</div>
                        <div class="card-subtitle">选择助手</div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="card-icon">👥</div>
                        <div class="card-title">身份</div>
                        <div class="card-subtitle">选择身份</div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="card-icon">📋</div>
                        <div class="card-title">回复样式</div>
                        <div class="card-subtitle">选择样式</div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="card-icon">Aa</div>
                        <div class="card-title">文风风格</div>
                        <div class="card-subtitle">选择风格</div>
                    </div>
                </div>
            </div>

            <!-- 搜索页面 -->
            <div class="page" id="search-page">
                <!-- 搜索配置头部 -->
                <div class="search-header">
                    <h2>小组件配置</h2>
                    <div class="header-actions">
                        <button class="sync-btn">🔄 同步小组件</button>
                        <button class="weight-btn">⚖️ 重置</button>
                        <button class="help-btn">❓</button>
                    </div>
                </div>

                <!-- 搜索引擎选择 -->
                <div class="search-config">
                    <div class="config-tabs">
                        <button class="config-tab active">🔍 搜索引擎</button>
                        <button class="config-tab">📱 应用选择</button>
                        <button class="config-tab">🧠 AI助手</button>
                    </div>

                    <div class="search-engines">
                        <div class="section-title">搜索引擎</div>
                        <div class="engine-note">按分类选择</div>
                        
                        <div class="engine-categories">
                            <button class="category-btn active">AI搜索</button>
                            <button class="category-btn">专业搜索</button>
                            <button class="category-btn selected">国内搜索</button>
                            <button class="category-btn">国际搜索</button>
                        </div>

                        <div class="engine-grid">
                            <div class="engine-item selected">
                                <div class="engine-icon baidu">🔍</div>
                                <div class="engine-name">百度</div>
                                <div class="engine-check">✓</div>
                            </div>
                            
                            <div class="engine-item">
                                <div class="engine-icon sogou">$</div>
                                <div class="engine-name">搜狗</div>
                                <div class="engine-radio">○</div>
                            </div>
                            
                            <div class="engine-item">
                                <div class="engine-icon so360">🔍</div>
                                <div class="engine-name">360搜索</div>
                                <div class="engine-radio">○</div>
                            </div>
                            
                            <div class="engine-item">
                                <div class="engine-icon shenma">$</div>
                                <div class="engine-name">神马搜索</div>
                                <div class="engine-radio">○</div>
                            </div>
                            
                            <div class="engine-item">
                                <div class="engine-icon chinaso">C</div>
                                <div class="engine-name">中国搜索</div>
                                <div class="engine-radio">○</div>
                            </div>
                            
                            <div class="engine-item">
                                <div class="engine-icon haosou">H</div>
                                <div class="engine-name">好搜</div>
                                <div class="engine-radio">○</div>
                            </div>
                        </div>

                        <div class="config-note">
                            <span class="note-icon">ℹ️</span>
                            最多选择4个搜索引擎，至少保留1个
                        </div>
                    </div>
                </div>
            </div>

            <!-- 应用页面 -->
            <div class="page" id="apps-page">
                <div class="apps-header">
                    <h2>应用搜索</h2>
                </div>

                <!-- 顶部搜索框 -->
                <div class="top-search-bar">
                    <div class="search-icon-container">
                        <div class="selected-app-icon" id="selectedAppIcon" data-app="xiaohongshu">
                            <div class="app-letter" style="background: linear-gradient(135deg, #ff2442 0%, #ff1744 100%); color: white;">小</div>
                        </div>
                        <div class="dropdown-arrow">▼</div>
                        <div class="recent-apps-dropdown" id="recentAppsDropdown" style="display: none;">
                            <div class="recent-apps-header">近期选择</div>
                            <div class="recent-apps-list" id="recentAppsList">
                                <!-- 近期选择的应用图标将在这里显示 -->
                            </div>
                        </div>
                    </div>
                    <input type="text" placeholder="输入关键词，选择app搜索" class="app-search-input">
                    <button class="clear-btn" id="app-search-clear-btn" title="清空">×</button>
                </div>

                <div class="apps-layout">
                    <div class="categories-and-apps">
                        <!-- 左侧分类 -->
                        <div class="app-categories">
                            <div class="category-list" id="category-list">
                                <div class="category-item starred" data-category="custom">⭐ 自定义</div>
                                <div class="category-item active" data-category="all">📱 全部</div>
                                <div class="category-item" data-category="shopping">🛍️ 购物</div>
                                <div class="category-item" data-category="social">👥 社交</div>
                                <div class="category-item" data-category="video">📺 视频</div>
                                <div class="category-item" data-category="music">🎵 音乐</div>
                                <div class="category-item" data-category="life">🏠 生活</div>
                                <div class="category-item" data-category="map">🗺️ 地图</div>
                            </div>
                        </div>

                        <!-- 右侧应用网格 -->
                        <div class="apps-content">
                            <div class="apps-grid" id="apps-grid">
                                <!-- 应用图标将通过JavaScript动态生成 -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 浏览器页面 -->
            <div class="page" id="browser-page">
                <!-- 浏览器地址栏 -->
                <div class="browser-address-bar">
                    <div class="address-controls">
                        <button class="nav-btn" id="backBtn" title="后退">◀️</button>
                        <button class="nav-btn" id="forwardBtn" title="前进">▶️</button>
                        <button class="nav-btn" id="refreshBtn" title="刷新">🔄</button>
                    </div>
                    
                    <div class="url-container">
                        <button class="search-engine-btn" id="searchEngineBtn" title="搜索引擎">🔍</button>
                        <input type="text" class="url-input" placeholder="搜索或输入网址" value="https://m.baidu.com">
                        <div class="url-action-buttons">
                            <button class="url-action-btn paste-btn" title="粘贴">📋</button>
                            <button class="url-action-btn clear-btn" title="清空">✕</button>
                        </div>
                        <button class="ai-model-btn" id="aiModelBtn" title="AI模型">🤖</button>
                    </div>
                </div>
                
                <!-- 浏览器工具栏 -->
                <div class="browser-toolbar">
                    <button class="tool-btn" id="homeBtn" title="主页">🏠</button>
                    <button class="tool-btn" id="bookmarkBtn" title="收藏">⭐</button>
                    <button class="tool-btn" id="bookmarkListBtn" title="收藏夹">📚</button>
                    <button class="tool-btn" id="tabsBtn" title="标签页">📄</button>
                    <button class="tool-btn" id="historyBtn" title="历史">🕒</button>
                    <button class="tool-btn" id="downloadBtn" title="下载">⬇️</button>
                    <button class="tool-btn" id="shareBtn" title="分享">📤</button>
                </div>
                
                <!-- 浏览器内容区域 -->
                <div class="browser-content">
                    <div class="browser-loading" id="browserLoading"></div>
                    <iframe id="browserFrame" src="https://m.baidu.com" frameborder="0"></iframe>
                </div>
            </div>

            <!-- 设置页面 -->
            <div class="page" id="settings-page">
                <div class="settings-header">
                    <h2>小组件</h2>
                </div>
                
                <div class="settings-content">
                    <div class="setting-item">
                        <div class="setting-icon">🎨</div>
                        <div class="setting-info">
                            <div class="setting-title">主题设置</div>
                            <div class="setting-desc">切换明暗主题</div>
                        </div>
                        <div class="setting-toggle">
                            <input type="checkbox" id="theme-toggle">
                            <label for="theme-toggle"></label>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-icon">🔔</div>
                        <div class="setting-info">
                            <div class="setting-title">通知设置</div>
                            <div class="setting-desc">管理推送通知</div>
                        </div>
                        <div class="setting-arrow">></div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-icon">🔒</div>
                        <div class="setting-info">
                            <div class="setting-title">隐私设置</div>
                            <div class="setting-desc">数据与隐私</div>
                        </div>
                        <div class="setting-arrow">></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 底部导航 -->
        <div class="bottom-nav">
            <div class="nav-item active" data-page="ai-page">
                <div class="nav-icon">💬</div>
                <div class="nav-label">AI</div>
            </div>
            
            <div class="nav-item" data-page="browser-page">
                <div class="nav-icon">🔗</div>
                <div class="nav-label">浏览</div>
            </div>
            
            <div class="nav-item" data-page="search-page">
                <div class="nav-icon">🔍</div>
                <div class="nav-label">搜索</div>
            </div>
            
            <div class="nav-item" data-page="apps-page">
                <div class="nav-icon">📱</div>
                <div class="nav-label">应用</div>
            </div>
            
            <div class="nav-item" data-page="settings-page">
                <div class="nav-icon">⚙️</div>
                <div class="nav-label">设置</div>
            </div>
        </div>

        <!-- 底部指示器 -->
        <div class="home-indicator"></div>
    </div>

    <!-- 分类长按菜单 -->
    <div class="category-context-menu" id="categoryContextMenu" style="display: none;">
        <div class="context-menu-item" data-action="set-default">
            <span class="menu-icon">⭐</span>
            <span class="menu-text">设置默认图标</span>
        </div>
        <div class="context-menu-item" data-action="move-to-category">
            <span class="menu-icon">📁</span>
            <span class="menu-text">移动到分类</span>
        </div>
        <div class="context-menu-item" data-action="direct-search">
            <span class="menu-icon">🔍</span>
            <span class="menu-text">直接搜索</span>
        </div>
    </div>

    <script src="iphone-user-agent.js"></script>
    <script src="mobile-force-optimizer.js"></script>
    <script src="icon-config.js"></script>
    <script src="mobile-app-search.js"></script>
    <script src="mobile-script.js"></script>
    <script src="ai-chat.js"></script>
    <script src="enhanced-browser-v3.js"></script>
</body>
</html>